# üìã –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Card Management System

## üéØ –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

## –≠—Ç–∞–ø 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 1.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ pom.xml
- –î–æ–±–∞–≤–∏—Ç—å Spring Data JPA –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- –î–æ–±–∞–≤–∏—Ç—å Liquibase –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π
- –î–æ–±–∞–≤–∏—Ç—å JWT –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (jjwt-api, jjwt-impl, jjwt-jackson)
- –î–æ–±–∞–≤–∏—Ç—å Swagger/OpenAPI (springdoc-openapi)
- –î–æ–±–∞–≤–∏—Ç—å Testcontainers –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –î–æ–±–∞–≤–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (javax.crypto –≤–∫–ª—é—á–µ–Ω–∞ –≤ JDK)

### 1.2 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –°–æ–∑–¥–∞—Ç—å `application.yml` —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏ (dev, prod)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Liquibase
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (logback-spring.xml)
- –°–æ–∑–¥–∞—Ç—å `.env.example` –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 1.3 Docker-–æ–∫—Ä—É–∂–µ–Ω–∏–µ
- –°–æ–∑–¥–∞—Ç—å `docker-compose.yml` —Å PostgreSQL
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ë–î
- –î–æ–±–∞–≤–∏—Ç—å volume –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

---

## –≠—Ç–∞–ø 2: –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–º–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ (Entity)

### 2.1 –ë–∞–∑–æ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
- **User** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∏—Å—Ç–µ–º—ã (id, username, email, password, createdAt, updatedAt)
- **Role** ‚Äî —Ä–æ–ª–∏ (id, name: ADMIN/USER)
- **Card** ‚Äî –±–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞ (id, cardNumber, ownerId, expirationDate, status, balance, createdAt, updatedAt)
- **Transaction** ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (id, fromCardId, toCardId, amount, timestamp, status)
- **AuditLog** ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–π –∞—É–¥–∏—Ç (id, userId, action, entityType, entityId, timestamp, details)

### 2.2 Enum-–∫–ª–∞—Å—Å—ã
- **CardStatus** ‚Äî ACTIVE, BLOCKED, EXPIRED
- **TransactionStatus** ‚Äî SUCCESS, FAILED
- **AuditAction** ‚Äî CREATE, UPDATE, DELETE, BLOCK, ACTIVATE, TRANSFER

### 2.3 –°–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏
- User ‚Üî Role (ManyToMany)
- User ‚Üî Card (OneToMany)
- Card ‚Üî Transaction (OneToMany –¥–ª—è fromCard –∏ toCard)

---

## –≠—Ç–∞–ø 3: –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Liquibase)

### 3.1 –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–∏–≥—Ä–∞—Ü–∏–π
- `db/changelog/db.changelog-master.yaml` ‚Äî –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª
- `db/changelog/v1.0/01-create-users-table.yaml`
- `db/changelog/v1.0/02-create-roles-table.yaml`
- `db/changelog/v1.0/03-create-user-roles-table.yaml`
- `db/changelog/v1.0/04-create-cards-table.yaml`
- `db/changelog/v1.0/05-create-transactions-table.yaml`
- `db/changelog/v1.0/06-create-audit-logs-table.yaml`
- `db/changelog/v1.0/07-insert-default-roles.yaml`

### 3.2 –ò–Ω–¥–µ–∫—Å—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ owner_id, card_number, status
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ card_number
- Foreign keys —Å ON DELETE CASCADE –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ

---

## –≠—Ç–∞–ø 4: –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (Repository Layer)

### 4.1 –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- **UserRepository** ‚Äî findByUsername, findByEmail, existsByUsername
- **RoleRepository** ‚Äî findByName
- **CardRepository** ‚Äî findByOwnerId, findByCardNumber, findByStatus, findByOwnerIdAndId
- **TransactionRepository** ‚Äî findByFromCardId, findByToCardId, findByTimestampBetween
- **AuditLogRepository** ‚Äî findByUserId, findByEntityTypeAndEntityId

### 4.2 –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç
- –ü–æ–∏—Å–∫ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ –ø–µ—Ä–∏–æ–¥—É
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ä—Ç–∞–º –¥–ª—è –∞–¥–º–∏–Ω–∞

---

## –≠—Ç–∞–ø 5: DTO –∏ –º–∞–ø–ø–∏–Ω–≥

### 5.1 Request DTO
- **RegisterRequest** ‚Äî username, email, password
- **LoginRequest** ‚Äî username, password
- **CardCreateRequest** ‚Äî ownerId, expirationDate, initialBalance
- **TransferRequest** ‚Äî fromCardId, toCardId, amount
- **CardFilterRequest** ‚Äî status, ownerId, page, size

### 5.2 Response DTO
- **AuthResponse** ‚Äî accessToken, refreshToken, username, roles
- **CardResponse** ‚Äî id, maskedCardNumber, expirationDate, status, balance, createdAt
- **TransactionResponse** ‚Äî id, fromCardId, toCardId, amount, timestamp, status
- **UserResponse** ‚Äî id, username, email, roles, createdAt
- **ErrorResponse** ‚Äî timestamp, status, error, code, message, path

### 5.3 –ú–∞–ø–ø–∏–Ω–≥
- –°–æ–∑–¥–∞—Ç—å MapperUtil –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MapStruct
- –ú–∞–ø–ø–∏–Ω–≥ Entity ‚Üî DTO

---

## –≠—Ç–∞–ø 6: –£—Ç–∏–ª–∏—Ç—ã (Util Layer)

### 6.1 –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- **EncryptionUtil** ‚Äî encrypt/decrypt –Ω–æ–º–µ—Ä–æ–≤ –∫–∞—Ä—Ç (AES-256)
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 6.2 –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ
- **CardMaskUtil** ‚Äî maskCardNumber (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `**** **** **** 1234`)

### 6.3 –ì–µ–Ω–µ—Ä–∞—Ü–∏—è
- **CardNumberGenerator** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç—ã (16 —Ü–∏—Ñ—Ä, –∞–ª–≥–æ—Ä–∏—Ç–º –õ—É–Ω–∞)

### 6.4 –í–∞–ª–∏–¥–∞—Ü–∏—è
- **CardValidator** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è, —Å—Ç–∞—Ç—É—Å–∞
- **BalanceValidator** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤

---

## –≠—Ç–∞–ø 7: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (Security Layer)

### 7.1 JWT
- **JwtUtil** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ (access: 15 –º–∏–Ω, refresh: 7 –¥–Ω–µ–π)
- **JwtFilter** ‚Äî —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
- **JwtAuthenticationEntryPoint** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ 401 –æ—à–∏–±–æ–∫

### 7.2 Spring Security
- **SecurityConfig** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ü–µ–ø–æ—á–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- **UserDetailsServiceImpl** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **PasswordEncoder** ‚Äî BCrypt –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π

### 7.3 –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ —Ä–æ–ª—è–º (ADMIN, USER)
- Method-level security (@PreAuthorize)

---

## –≠—Ç–∞–ø 8: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (Service Layer)

### 8.1 AuthService
- register() ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Ä–æ–ª—å—é USER
- login() ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –≤—ã–¥–∞—á–∞ JWT
- refreshToken() ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ access token

### 8.2 CardService
- createCard() ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã (—Ç–æ–ª—å–∫–æ ADMIN)
- getCardsByOwner() ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- getCardById() ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –ø–æ ID
- blockCard() ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–∞—Ä—Ç—ã
- activateCard() ‚Äî –∞–∫—Ç–∏–≤–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
- deleteCard() ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã (—Ç–æ–ª—å–∫–æ ADMIN)
- getBalance() ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

### 8.3 TransferService
- transfer() ‚Äî –ø–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å–≤–æ–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏
- validateTransfer() ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–≤–æ–¥–∞
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ (@Transactional)

### 8.4 UserService
- getAllUsers() ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ç–æ–ª—å–∫–æ ADMIN)
- getUserById() ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- updateUser() ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- deleteUser() ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–æ–ª—å–∫–æ ADMIN)

### 8.5 AuditService
- logAction() ‚Äî –∑–∞–ø–∏—Å—å –¥–µ–π—Å—Ç–≤–∏—è –≤ audit_logs
- getAuditLogs() ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤ (—Ç–æ–ª—å–∫–æ ADMIN)

---

## –≠—Ç–∞–ø 9: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (Exception Layer)

### 9.1 –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- **BaseException** ‚Äî –±–∞–∑–æ–≤–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ —Å –∫–æ–¥–æ–º
- **AuthenticationException** ‚Äî AUTH_INVALID_TOKEN, AUTH_ACCESS_DENIED
- **ResourceNotFoundException** ‚Äî USER_NOT_FOUND, CARD_NOT_FOUND
- **BusinessException** ‚Äî CARD_BLOCKED, INSUFFICIENT_BALANCE, TRANSFER_SELF_ONLY
- **ValidationException** ‚Äî VALIDATION_ERROR

### 9.2 –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
- **GlobalExceptionHandler** (@ControllerAdvice)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –µ–¥–∏–Ω–æ–≥–æ ErrorResponse
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

---

## –≠—Ç–∞–ø 10: REST API (Controller Layer)

### 10.1 AuthController
- `POST /api/auth/register` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/auth/login` ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `POST /api/auth/refresh` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

### 10.2 CardController
- `GET /api/cards` ‚Äî —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (USER)
- `GET /api/cards/{id}` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã –ø–æ ID (USER)
- `POST /api/cards` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã (ADMIN)
- `PATCH /api/cards/{id}/block` ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–∞—Ä—Ç—ã (ADMIN/USER)
- `PATCH /api/cards/{id}/activate` ‚Äî –∞–∫—Ç–∏–≤–∞—Ü–∏—è –∫–∞—Ä—Ç—ã (ADMIN)
- `DELETE /api/cards/{id}` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã (ADMIN)
- `GET /api/cards/{id}/balance` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ (USER)

### 10.3 TransferController
- `POST /api/transfers` ‚Äî –ø–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É –∫–∞—Ä—Ç–∞–º–∏ (USER)
- `GET /api/transfers/history` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (USER)

### 10.4 AdminController
- `GET /api/admin/users` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (ADMIN)
- `GET /api/admin/cards` ‚Äî –≤—Å–µ –∫–∞—Ä—Ç—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π (ADMIN)
- `GET /api/admin/audit-logs` ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–π –∞—É–¥–∏—Ç (ADMIN)
- `GET /api/admin/statistics` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ä—Ç–∞–º (ADMIN)

---

## –≠—Ç–∞–ø 11: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Config Layer)

### 11.1 –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **SecurityConfig** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Spring Security
- **JwtConfig** ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã JWT (secret, expiration)
- **SwaggerConfig** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- **CorsConfig** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ CORS
- **LiquibaseConfig** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–π

### 11.2 –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **LoggingConfig** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- **ValidationConfig** ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä—ã
- **AsyncConfig** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## –≠—Ç–∞–ø 12: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (OpenAPI/Swagger)

### 12.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Swagger
- –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ @Operation, @ApiResponse
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SecurityScheme –¥–ª—è JWT
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –ø–æ —Ç–µ–≥–∞–º

### 12.2 –°–æ–∑–¥–∞–Ω–∏–µ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –≠–∫—Å–ø–æ—Ä—Ç –≤ `docs/openapi.yaml`
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤

---

## –≠—Ç–∞–ø 13: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 13.1 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Logback
- –°–æ–∑–¥–∞—Ç—å `logback-spring.xml`
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å appenders (console, file, error-file)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤ (7 –¥–Ω–µ–π)
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤

### 13.2 –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Å–µ—Ä–≤–∏—Å—ã (INFO –¥–ª—è —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ (ERROR –≤ GlobalExceptionHandler)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (WARN –¥–ª—è –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞)
- –ò—Å–∫–ª—é—á–∏—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ª–æ–≥–æ–≤

---

## –≠—Ç–∞–ø 14: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 14.1 Unit-—Ç–µ—Å—Ç—ã
- –¢–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤ (CardService, TransferService, AuthService)
- –¢–µ—Å—Ç—ã —É—Ç–∏–ª–∏—Ç (EncryptionUtil, CardMaskUtil, CardNumberGenerator)
- –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Mockito)
- –ü–æ–∫—Ä—ã—Ç–∏–µ ‚â• 65%

### 14.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- –¢–µ—Å—Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ (@WebMvcTest)
- –¢–µ—Å—Ç—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (@DataJpaTest)
- –¢–µ—Å—Ç—ã —Å Testcontainers (PostgreSQL)
- –¢–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

### 14.3 –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–∞—Ä—Ç
- –°—Ü–µ–Ω–∞—Ä–∏–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

---

## –≠—Ç–∞–ø 15: Docker –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 15.1 Dockerfile
- –°–æ–∑–¥–∞—Ç—å multi-stage Dockerfile
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–∑–∞ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Alpine)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 15.2 Docker Compose
- –°–µ—Ä–≤–∏—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (app)
- –°–µ—Ä–≤–∏—Å –ë–î (postgres)
- Volumes –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- Networks –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏
- Health checks

### 15.3 –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞
- `start.sh` ‚Äî –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `stop.sh` ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- `logs.sh` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

---

## –≠—Ç–∞–ø 16: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

### 16.1 README.md
- –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ–∫—Ä—É–∂–µ–Ω–∏—é
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É (–ª–æ–∫–∞–ª—å–Ω–æ –∏ —á–µ—Ä–µ–∑ Docker)
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### 16.2 –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `CONTRIBUTING.md` ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –∫–æ–Ω—Ç—Ä–∏–±—É—Ü–∏–∏
- `CHANGELOG.md` ‚Äî –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- `API.md` ‚Äî –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ API
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ (Javadoc)

---

## –≠—Ç–∞–ø 17: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### 17.1 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –≤—Å–µ–º –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 17.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –ë–î (N+1 –ø—Ä–æ–±–ª–µ–º–∞)
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 17.3 Code Review
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º –ø—Ä–∞–≤–∏–ª–∞–º
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ code smells

---

## üìä –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

| –≠—Ç–∞–ø | –í—Ä–µ–º—è (—á–∞—Å—ã) |
|------|--------------|
| –≠—Ç–∞–ø 1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ | 2-3 |
| –≠—Ç–∞–ø 2: –î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å | 2-3 |
| –≠—Ç–∞–ø 3: –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î | 2-3 |
| –≠—Ç–∞–ø 4: –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ | 2-3 |
| –≠—Ç–∞–ø 5: DTO –∏ –º–∞–ø–ø–∏–Ω–≥ | 3-4 |
| –≠—Ç–∞–ø 6: –£—Ç–∏–ª–∏—Ç—ã | 3-4 |
| –≠—Ç–∞–ø 7: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | 5-6 |
| –≠—Ç–∞–ø 8: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ | 8-10 |
| –≠—Ç–∞–ø 9: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π | 2-3 |
| –≠—Ç–∞–ø 10: REST API | 5-6 |
| –≠—Ç–∞–ø 11: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | 2-3 |
| –≠—Ç–∞–ø 12: Swagger | 2-3 |
| –≠—Ç–∞–ø 13: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | 2-3 |
| –≠—Ç–∞–ø 14: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | 10-12 |
| –≠—Ç–∞–ø 15: Docker | 3-4 |
| –≠—Ç–∞–ø 16: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | 3-4 |
| –≠—Ç–∞–ø 17: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ | 3-4 |
| **–ò–¢–û–ì–û** | **60-75 —á–∞—Å–æ–≤** |

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å (MVP):
1. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –ë–î (–≠—Ç–∞–ø—ã 1-3)
2. –ë–∞–∑–æ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (–≠—Ç–∞–ø 4)
3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–≠—Ç–∞–ø 7)
4. –û—Å–Ω–æ–≤–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (–≠—Ç–∞–ø 8)
5. REST API (–≠—Ç–∞–ø 10)

### –í—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏:
- Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)
- –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- 2FA –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- ‚úÖ –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å–æ–≥–ª–∞—Å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ä–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å (ADMIN, USER)
- ‚úÖ –ù–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç —à–∏—Ñ—Ä—É—é—Ç—Å—è –∏ –º–∞—Å–∫–∏—Ä—É—é—Ç—Å—è
- ‚úÖ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—Å–µ –±–∏–∑–Ω–µ—Å-–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–æ–±–ª—é–¥–∞—é—Ç—Å—è
- ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ ‚â• 65%
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Docker Compose
- ‚úÖ Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω –∏ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ README —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –∑–∞–ø—É—Å–∫—É

---

¬© 2025 Ayungich
